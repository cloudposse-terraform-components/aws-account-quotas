name: "aws-account-quotas"
# Canonical GitHub repo
github_repo: "cloudposse-terraform-components/aws-account-quotas"
# Short description of this project
description: |-
  This component is responsible for requesting AWS Service Quota increases.
  We recommend making requests here rather than in `account-settings` because
  `account-settings` is a restricted component that can only be applied by SuperAdmin.
usage: |-
  ## Usage

  **Stack Level**: Global and Regional (depending on quota)

  Global resources must be provisioned in `us-east-1`. Put them in the `gbl` stack,
  but set `region: us-east-1` in the `vars` section.

  You can refer to services either by their exact full name (e.g.
  `service_name: "Amazon Elastic Compute Cloud (Amazon EC2)"`) or by the service
  code (e.g. `service_code: "ec2"`). Similarly, you can refer to quota names either
  by their exact full name (e.g. `quota_name: "EC2-VPC Elastic IPs"`) or by the quota
  code (e.g. `quota_code: "L-0263D0A3"`).

  You can find service codes and full names via the AWS CLI (be sure to use the
  correct region):

  ```bash
  aws --region us-east-1 service-quotas list-services
  ```

  You can find quota codes and full names, and also whether the quotas are adjustable
  or global, via the AWS CLI, but you will need the service code from the previous step:

  ```bash
  aws --region us-east-1 service-quotas list-service-quotas --service-code ec2
  ```

  If you make a request to raise a quota, the output will show the requested value as
  `value` while the request is pending.

  ### Special Usage Notes

  Even though the Terraform will submit the support request, you may need to follow up
  with AWS Support to get the request approved, via the AWS Console or email.

  #### Resources are destroyed on change

  Because the AWS API often returns default values rather than configured or applicable
  values for a given quota, we must ignore the value returned by the API or else face
  perpetual drift. To allow us to change the value in the future, even though we are
  ignoring it, we encode the value in the resource key, so that a change of value will
  result in a new resource being created and the old one being destroyed. Destroying the
  old resource has no actual effect (it does not even close an open request), so it is
  safe to do.

  ### Example

  Here's an example snippet for how to use this component.

  ```yaml
  components:
    terraform:
      account-quotas:
        vars:
          quotas:
            vpcs-per-region:
              service_code: vpc
              quota_name: "VPCs per Region"
              value: 10
            vpc-elastic-ips:
              service_code: ec2
              quota_name: "EC2-VPC Elastic IPs"
              value: 10
  ```

  <!-- prettier-ignore-start -->
  <!-- prettier-ignore-end -->
references:
  - name: AWS Service Quotas
    description: ""
    url: https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html
  - name: AWS CLI list services
    description: "Command to list service codes: aws service-quotas list-services"
    url: https://awscli.amazonaws.com/v2/documentation/api/latest/reference/service-quotas/list-services.html
  - name: AWS CLI list service quotas
    description: "Command to list service quotas: aws service-quotas list-service-quotas. Note: 'For some quotas, only the default values are available.'"
    url: https://awscli.amazonaws.com/v2/documentation/api/latest/reference/service-quotas/list-service-quotas.html
  - name: Medium article
    description: "Explains how many AWS service limits are not available."
    url: https://medium.com/@jsonk/the-limit-does-not-exist-hidden-visibility-of-aws-service-limits-4b786f846bc0
tags:
  - component/account-quotas
  - layer/foundation
  - provider/aws
# Categories of this project
categories:
  - component/account-quotas
  - layer/foundation
  - provider/aws
# License of this project
license: "APACHE2"
# Badges to display
badges:
  - name: Latest Release
    image: https://img.shields.io/github/release/cloudposse-terraform-components/aws-account-quotas.svg?style=for-the-badge
    url: https://github.com/cloudposse-terraform-components/aws-account-quotas/releases/latest
  - name: Slack Community
    image: https://slack.cloudposse.com/for-the-badge.svg
    url: https://slack.cloudposse.com
related:
  - name: "Cloud Posse Terraform Modules"
    description: Our collection of reusable Terraform modules used by our reference architectures.
    url: "https://docs.cloudposse.com/modules/"
  - name: "Atmos"
    description: "Atmos is like docker-compose but for your infrastructure"
    url: "https://atmos.tools"
contributors: [] # If included generates contribs
